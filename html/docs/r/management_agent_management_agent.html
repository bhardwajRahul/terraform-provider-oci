<!DOCTYPE html>
<html>
<head>
  <title>Oracle Cloud Infrastructure - Resource: oci_management_agent_management_agent</title>
  <meta name="GENERATOR" content="Generated from terraform-provider-oci markdown documentation">
  <meta charset="utf-8">
  <link rel="stylesheet" type="text/css" href="../../css/style.css">
</head>
<body>

	<div class="nav_wrap">
		<iframe id ="nav_list" src="../../toc.html"></iframe>
	</div>

	<div class="main" tabindex="-1">
<h1>oci_management_agent_management_agent</h1>

<p>This resource provides the Management Agent resource in Oracle Cloud Infrastructure Management Agent service.
Api doc link for the resource: <a href="https://docs.oracle.com/iaas/api/#/en/management-agent/latest/ManagementAgent">https://docs.oracle.com/iaas/api/#/en/management-agent/latest/ManagementAgent</a></p>

<p>Example terraform configs related to the resource : <a href="https://github.com/oracle/terraform-provider-oci/tree/master/examples/management_agent">https://github.com/oracle/terraform-provider-oci/tree/master/examples/management_agent</a></p>

<h2>Example Usage</h2>

<pre><code class="language-hcl">resource &quot;oci_management_agent_management_agent&quot; &quot;test_management_agent&quot; {
	#Required
	managed_agent_id = oci_management_agent_managed_agent.test_managed_agent.id
}
</code></pre>

<hr>

<p>Add plugin to Management Agent created via OCI Compute instance.</p>

<p>Compute instance must have OCA Plugin &ldquo;Management Agent&rdquo; enabled</p>

<pre><code class="language-hcl">resource &quot;oci_core_instance&quot; &quot;instance&quot; {
    .....
	agent_config {
	  ...
	  plugins_config {
		desired_state = &quot;ENABLED&quot;
		name          = &quot;Management Agent&quot;
	  }
	
	}
}
</code></pre>

<pre><code class="language-hcl">data &quot;oci_management_agent_management_agents&quot; &quot;find_agent&quot; {
  compartment_id   = var.compartment_ocid
  host_id          = oci_core_instance.instance.id
  wait_for_host_id = 10
}

data &quot;oci_management_agent_management_agent_plugins&quot; &quot;test_management_agent_plugins&quot; {
  compartment_id = var.compartment_ocid
  display_name   = &quot;Logging Analytics&quot;
}

resource &quot;oci_management_agent_management_agent&quot; &quot;test_management_agent&quot; {
  freeform_tags     = { &quot;TestingTag&quot; : &quot;TestingValue&quot; }
  managed_agent_id  = data.oci_management_agent_management_agents.find_agent.management_agents[0].id
  deploy_plugins_id = [data.oci_management_agent_management_agent_plugins.test_management_agent_plugins.management_agent_plugins.0.id]
}
</code></pre>

<h2>Argument Reference</h2>

<p>The following arguments are supported:</p>

<ul>
<li><code>managed_agent_id</code> - (Required) Unique Management Agent identifier</li>
<li><code>defined_tags</code> - (Optional) (Updatable) Defined tags for this resource. Each key is predefined and scoped to a namespace. For more information, see <a href="https://docs.cloud.oracle.com/iaas/Content/General/Concepts/resourcetags.htm">Resource Tags</a>. Example: <code>{&quot;Operations.CostCenter&quot;: &quot;42&quot;}</code></li>
<li><code>display_name</code> - (Optional) (Updatable) New displayName of Agent.</li>
<li><code>freeform_tags</code> - (Optional) (Updatable) Free-form tags for this resource. Each tag is a simple key-value pair with no predefined name, type, or namespace. For more information, see <a href="https://docs.cloud.oracle.com/iaas/Content/General/Concepts/resourcetags.htm">Resource Tags</a>. Example: <code>{&quot;Department&quot;: &quot;Finance&quot;}</code></li>
<li><code>deploy_plugins_id</code> - (Optional) (Updatable) Plugin Id list to deploy to Management Agent. Once deployed, plugins cannot be undeployed.</li>
</ul>

<p>** IMPORTANT **
Any change to a property that does not support update will force the destruction and recreation of the resource with the new property values</p>

<p>Management Agent resources are not created or destroyed by terraform.</p>

<p>Management Agents should be created using on premise installation, or OCA plugin for Management Agent. See <a href="https://docs.oracle.com/en-us/iaas/management-agents/index.html">Management Agent</a>.</p>

<p>Destroy operation in terraform will not delete the Management Agent, this must be performed by steps indicated in <a href="https://docs.oracle.com/en-us/iaas/management-agents/index.html">Management Agent</a>. Destroy will remove the resource from terraform state only.</p>

<h2>Attributes Reference</h2>

<p>The following attributes are exported:</p>

<ul>
<li><code>availability_status</code> - The current availability status of managementAgent</li>
<li><code>compartment_id</code> - Compartment Identifier</li>
<li><code>data_source_list</code> - list of dataSources associated with the agent

<ul>
<li><code>allow_metrics</code> - Comma separated metric name list. The complete set of desired scraped metrics. Use this property to limit the set of metrics uploaded if required.</li>
<li><code>compartment_id</code> - Compartment owning this DataSource.</li>
<li><code>connection_timeout</code> - Number in milliseconds. The timeout for connecting to the Prometheus Exporter&rsquo;s endpoint.</li>
<li><code>is_daemon_set</code> - If the Kubernetes cluster type is Daemon set then this will be set to true.</li>
<li><code>key</code> - Identifier for DataSource. This represents the type and name for the data source associated with the Management Agent.</li>
<li><code>metric_dimensions</code> - The names of other user-supplied properties expressed as fixed values to be used as dimensions for every uploaded datapoint.

<ul>
<li><code>name</code> - Name of the metric dimension</li>
<li><code>value</code> - Value of the metric dimension</li>
</ul></li>
<li><code>name</code> - Unique name of the DataSource.</li>
<li><code>namespace</code> - The Oracle Cloud Infrastructure monitoring namespace to which scraped metrics should be uploaded.</li>
<li><code>proxy_url</code> - The url of the network proxy that provides access to the Prometheus Exporter&rsquo;s endpoint (url required property).</li>
<li><code>read_data_limit</code> - Number in kilobytes. The limit on the data being sent, not to exceed the agent&rsquo;s fixed limit of 400 (KB).</li>
<li><code>read_timeout</code> - Number in milliseconds. The timeout for reading the response from the Prometheus Exporter&rsquo;s endpoint.</li>
<li><code>resource_group</code> - Oracle Cloud Infrastructure monitoring resource group to assign the metric to.</li>
<li><code>schedule_mins</code> - Number in minutes. The scraping occurs at the specified interval.</li>
<li><code>state</code> - State of the DataSource.</li>
<li><code>time_created</code> - The time the DataSource was created. An RFC3339 formatted datetime string</li>
<li><code>time_updated</code> - The time the DataSource data was last received. An RFC3339 formatted datetime string</li>
<li><code>type</code> - The type of the DataSource.</li>
<li><code>url</code> - The url through which the Prometheus Exporter publishes its metrics. (http only)</li>
</ul></li>
<li><code>defined_tags</code> - Defined tags for this resource. Each key is predefined and scoped to a namespace. Example: <code>{&quot;foo-namespace.bar-key&quot;: &quot;value&quot;}</code></li>
<li><code>display_name</code> - Management Agent Name</li>
<li><code>freeform_tags</code> - Simple key-value pair that is applied without any predefined name, type or scope. Exists for cross-compatibility only. Example: <code>{&quot;bar-key&quot;: &quot;value&quot;}</code></li>
<li><code>host</code> - Management Agent host machine name</li>
<li><code>host_id</code> - Host resource ocid</li>
<li><code>id</code> - agent identifier</li>
<li><code>install_key_id</code> - agent install key identifier</li>
<li><code>install_path</code> - Path where Management Agent is installed</li>
<li><code>install_type</code> - The install type, either AGENT or GATEWAY</li>
<li><code>is_agent_auto_upgradable</code> - true if the agent can be upgraded automatically; false if it must be upgraded manually. This flag is derived from the tenancy level auto upgrade preference.</li>
<li><code>is_customer_deployed</code> - true, if the agent image is manually downloaded and installed. false, if the agent is deployed as a plugin in Oracle Cloud Agent.</li>
<li><code>lifecycle_details</code> - A message describing the current state in more detail. For example, can be used to provide actionable information for a resource in Failed state.</li>
<li><code>management_agent_properties</code> - Additional properties for this Management Agent

<ul>
<li><code>name</code> - Name of the property</li>
<li><code>units</code> - Unit for the property</li>
<li><code>values</code> - Values of the property</li>
</ul></li>
<li><code>platform_name</code> - Platform Name</li>
<li><code>platform_type</code> - Platform Type</li>
<li><code>platform_version</code> - Platform Version</li>
<li><code>plugin_list</code> - list of managementAgentPlugins associated with the agent

<ul>
<li><code>is_enabled</code> - flag indicating whether the plugin is in enabled mode or disabled mode.</li>
<li><code>plugin_display_name</code> - Management Agent Plugin Identifier, can be renamed</li>
<li><code>plugin_id</code> - Plugin Id</li>
<li><code>plugin_name</code> - Management Agent Plugin Name</li>
<li><code>plugin_status</code> - Plugin Status</li>
<li><code>plugin_status_message</code> - Status message of the Plugin</li>
<li><code>plugin_version</code> - Plugin Version</li>
</ul></li>
<li><code>resource_artifact_version</code> - Version of the deployment artifact instantiated by this Management Agent. The format for Standalone resourceMode is YYMMDD.HHMM, and the format for other modes (whose artifacts are based upon Standalone but can advance independently) is YYMMDD.HHMM.VVVVVVVVVVVV. VVVVVVVVVVVV is always a numeric value between 000000000000 and 999999999999</li>
<li><code>state</code> - The current state of managementAgent</li>
<li><code>system_tags</code> - Usage of system tag keys. These predefined keys are scoped to namespaces. Example: <code>{&quot;orcl-cloud.free-tier-retained&quot;: &quot;true&quot;}</code></li>
<li><code>time_created</code> - The time the Management Agent was created. An RFC3339 formatted datetime string</li>
<li><code>time_last_heartbeat</code> - The time the Management Agent has last recorded its health status in telemetry. This value will be null if the agent has not recorded its health status in last 7 days. An RFC3339 formatted datetime string</li>
<li><code>time_updated</code> - The time the Management Agent was last updated. An RFC3339 formatted datetime string</li>
<li><code>version</code> - Management Agent Version</li>
</ul>

<h2>Timeouts</h2>

<p>The <code>timeouts</code> block allows you to specify <a href="https://registry.terraform.io/providers/oracle/oci/latest/docs/guides/changing_timeouts">timeouts</a> for certain operations:
	* <code>create</code> - (Defaults to 20 minutes), when creating the Management Agent
	* <code>update</code> - (Defaults to 20 minutes), when updating the Management Agent
	* <code>delete</code> - (Defaults to 20 minutes), when destroying the Management Agent</p>

<h2>Import</h2>

<p>ManagementAgents can be imported using the <code>id</code>, e.g.</p>

<pre><code>$ terraform import oci_management_agent_management_agent.test_management_agent &quot;id&quot;
</code></pre>

	</div>

</body>
</html>
