<!DOCTYPE html>
<html>
<head>
  <title>Oracle Cloud Infrastructure - Resource: oci_stack_monitoring_metric_extension</title>
  <meta name="GENERATOR" content="Generated from terraform-provider-oci markdown documentation">
  <meta charset="utf-8">
  <link rel="stylesheet" type="text/css" href="../../css/style.css">
</head>
<body>

	<div class="nav_wrap">
		<iframe id ="nav_list" src="../../toc.html"></iframe>
	</div>

	<div class="main" tabindex="-1">
<h1>oci_stack_monitoring_metric_extension</h1>

<p>This resource provides the Metric Extension resource in Oracle Cloud Infrastructure Stack Monitoring service.
Api doc link for the resource: <a href="https://docs.oracle.com/iaas/api/#/en/stack-monitoring/latest/MetricExtension">https://docs.oracle.com/iaas/api/#/en/stack-monitoring/latest/MetricExtension</a></p>

<p>Example terraform configs related to the resource : <a href="https://github.com/oracle/terraform-provider-oci/tree/master/examples/stack_monitoring">https://github.com/oracle/terraform-provider-oci/tree/master/examples/stack_monitoring</a></p>

<p>Creates a new metric extension resource for a given compartment</p>

<h2>Example Usage</h2>

<pre><code class="language-hcl">resource &quot;oci_stack_monitoring_metric_extension&quot; &quot;test_metric_extension&quot; {
	#Required
	collection_recurrences = var.metric_extension_collection_recurrences
	compartment_id = var.compartment_id
	display_name = var.metric_extension_display_name
	metric_list {
		#Required
		data_type = var.metric_extension_metric_list_data_type
		name = var.metric_extension_metric_list_name

		#Optional
		compute_expression = var.metric_extension_metric_list_compute_expression
		display_name = var.metric_extension_metric_list_display_name
		is_dimension = var.metric_extension_metric_list_is_dimension
		is_hidden = var.metric_extension_metric_list_is_hidden
		metric_category = var.metric_extension_metric_list_metric_category
		unit = var.metric_extension_metric_list_unit
	}
	name = var.metric_extension_name
	query_properties {
		#Required
		collection_method = var.metric_extension_query_properties_collection_method

		#Optional
		arguments = var.metric_extension_query_properties_arguments
		auto_row_prefix = var.metric_extension_query_properties_auto_row_prefix
		command = var.metric_extension_query_properties_command
		delimiter = var.metric_extension_query_properties_delimiter
		identity_metric = var.metric_extension_query_properties_identity_metric
		in_param_details {

			#Optional
			in_param_position = var.metric_extension_query_properties_in_param_details_in_param_position
			in_param_value = var.metric_extension_query_properties_in_param_details_in_param_value
		}
		is_metric_service_enabled = var.metric_extension_query_properties_is_metric_service_enabled
		jmx_attributes = var.metric_extension_query_properties_jmx_attributes
		managed_bean_query = var.metric_extension_query_properties_managed_bean_query
		out_param_details {

			#Optional
			out_param_name = var.metric_extension_query_properties_out_param_details_out_param_name
			out_param_position = var.metric_extension_query_properties_out_param_details_out_param_position
			out_param_type = var.metric_extension_query_properties_out_param_details_out_param_type
		}
		protocol_type = var.metric_extension_query_properties_protocol_type
		response_content_type = var.metric_extension_query_properties_response_content_type
		script_details {

			#Optional
			content = var.metric_extension_query_properties_script_details_content
			name = var.metric_extension_query_properties_script_details_name
		}
		sql_details {

			#Optional
			content = var.metric_extension_query_properties_sql_details_content
			script_file_name = var.metric_extension_query_properties_sql_details_script_file_name
		}
		sql_type = var.metric_extension_query_properties_sql_type
		starts_with = var.metric_extension_query_properties_starts_with
		url = var.metric_extension_query_properties_url
	}
	resource_type = var.metric_extension_resource_type

	#Optional
	description = var.metric_extension_description
}
</code></pre>

<h2>Argument Reference</h2>

<p>The following arguments are supported:</p>

<ul>
<li><code>collection_recurrences</code> - (Required) (Updatable) Schedule of metric extension should use RFC 5545 format i.e. recur-rule-part = &ldquo;FREQ&rdquo;;INTERVAL where FREQ rule part identifies the type of recurrence rule. Valid values are &ldquo;MINUTELY&rdquo;,&ldquo;HOURLY&rdquo;,&ldquo;DAILY&rdquo; to specify repeating events based on an interval of a minute, an hour and a day or more. Example- FREQ=DAILY;INTERVAL=1</li>
<li><code>compartment_id</code> - (Required) (Updatable) Compartment Identifier <a href="https://docs.cloud.oracle.com/iaas/Content/General/Concepts/identifiers.htm">OCID</a></li>
<li><code>description</code> - (Optional) (Updatable) Description of the metric extension.</li>
<li><code>display_name</code> - (Required) (Updatable) Metric Extension display name.</li>
<li><code>metric_list</code> - (Required) (Updatable) List of metrics which are part of this metric extension

<ul>
<li><code>compute_expression</code> - (Optional) (Updatable) Compute Expression to calculate the value of this metric</li>
<li><code>data_type</code> - (Required) (Updatable) Data type of value of this metric</li>
<li><code>display_name</code> - (Optional) (Updatable) Display name of the metric.</li>
<li><code>is_dimension</code> - (Optional) (Updatable) Current metric need to be included as dimension or not</li>
<li><code>is_hidden</code> - (Optional) (Updatable) Flag to marks whether a metric has to be uploaded or not. When isHidden = false -&gt; Metric is uploaded, isHidden = true -&gt; Metric is NOT uploaded</li>
<li><code>metric_category</code> - (Optional) (Updatable) Metric category</li>
<li><code>name</code> - (Required) (Updatable) Name of the metric.</li>
<li><code>unit</code> - (Optional) (Updatable) Unit of metric value</li>
</ul></li>
<li><code>name</code> - (Required) Metric Extension Resource name.</li>
<li><code>query_properties</code> - (Required) (Updatable) Collection method and query properties details of metric extension

<ul>
<li><code>arguments</code> - (Applicable when collection_method=OS_COMMAND) (Updatable) Arguments required by either command or script</li>
<li><code>auto_row_prefix</code> - (Applicable when collection_method=JMX) (Updatable) Prefix for an auto generated metric, in case multiple rows with non unique key values are returned</li>
<li><code>collection_method</code> - (Required) (Updatable) Type of possible collection methods.</li>
<li><code>command</code> - (Required when collection_method=OS_COMMAND) (Updatable) OS command to execute without arguments</li>
<li><code>delimiter</code> - (Required when collection_method=OS_COMMAND) (Updatable) Character used to delimit multiple metric values in single line of output</li>
<li><code>identity_metric</code> - (Applicable when collection_method=JMX) (Updatable) Semi-colon separated list of key properties from Managed Bean ObjectName to be used as key metrics</li>
<li><code>in_param_details</code> - (Applicable when collection_method=SQL) (Updatable) List of values and position of PL/SQL procedure IN parameters

<ul>
<li><code>in_param_position</code> - (Required when collection_method=SQL) (Updatable) Position of IN parameter</li>
<li><code>in_param_value</code> - (Required when collection_method=SQL) (Updatable) Value of IN parameter</li>
</ul></li>
<li><code>is_metric_service_enabled</code> - (Applicable when collection_method=JMX) (Updatable) Indicates if Metric Service is enabled on server domain</li>
<li><code>jmx_attributes</code> - (Required when collection_method=JMX) (Updatable) List of JMX attributes or Metric Service Table columns separated by semi-colon</li>
<li><code>managed_bean_query</code> - (Required when collection_method=JMX) (Updatable) JMX Managed Bean Query or Metric Service Table name</li>
<li><code>out_param_details</code> - (Applicable when collection_method=SQL) (Updatable) Position and SQL Type of PL/SQL OUT parameter

<ul>
<li><code>out_param_name</code> - (Applicable when collection_method=SQL) (Updatable) Name of the Out Parameter</li>
<li><code>out_param_position</code> - (Required when collection_method=SQL) (Updatable) Position of PL/SQL procedure OUT parameter. The value of this property is ignored during update, if &ldquo;outParamType&rdquo; is set to NO_OUT_PARAM value.</li>
<li><code>out_param_type</code> - (Required when collection_method=SQL) (Updatable) SQL Type of PL/SQL procedure OUT parameter. During the update, to completely remove the out parameter, use the value NO_OUT_PARAM. In that case, the value of &ldquo;outParamPosition&rdquo; will be ignored.</li>
</ul></li>
<li><code>protocol_type</code> - (Applicable when collection_method=HTTP) (Updatable) Supported protocol of resources to be associated with this metric extension. This is optional and defaults to HTTPS, which uses secure connection to the URL</li>
<li><code>response_content_type</code> - (Required when collection_method=HTTP) (Updatable) Type of content response given by the http(s) URL</li>
<li><code>script_details</code> - (Required when collection_method=HTTP | OS_COMMAND) (Updatable) Script details applicable to any OS Command/HTTP based Metric Extension which needs to run a script to collect data. For removing it during OS Command based Metric Extension update, set its &ldquo;content&rdquo; property to an empty string. In that case, &ldquo;name&rdquo; property value is ignored.

<ul>
<li><code>content</code> - (Required when collection_method=HTTP | OS_COMMAND) (Updatable) Content of the script/JavaScript file as base64 encoded string</li>
<li><code>name</code> - (Required when collection_method=HTTP | OS_COMMAND) (Updatable) Name of the script file</li>
</ul></li>
<li><code>sql_details</code> - (Required when collection_method=SQL) (Updatable) Details of Sql content which needs to execute to collect Metric Extension data

<ul>
<li><code>content</code> - (Required when collection_method=SQL) (Updatable) Sql statement or script file content as base64 encoded string</li>
<li><code>script_file_name</code> - (Applicable when collection_method=SQL) (Updatable) If a script needs to be executed, then provide file name of the script</li>
</ul></li>
<li><code>sql_type</code> - (Required when collection_method=SQL) (Updatable) Type of SQL data collection method i.e. either a Statement or SQL Script File</li>
<li><code>starts_with</code> - (Applicable when collection_method=OS_COMMAND) (Updatable) String prefix used to identify metric output of the OS Command</li>
<li><code>url</code> - (Required when collection_method=HTTP) (Updatable) Http(s) end point URL</li>
</ul></li>
<li><code>resource_type</code> - (Required) Resource type to which Metric Extension applies</li>
<li><code>publish_trigger</code> - (Optional) (Updatable) An optional property when set to <code>true</code> triggers Publish of a metric extension. Once set to <code>true</code>, it cannot be changed back to <code>false</code>. Update of publish_trigger cannot be combined with other updates in the same request. A metric extension cannot be tested and its definition cannot be updated once it is marked published or publish_trigger is updated to <code>true</code>.</li>
</ul>

<p>** IMPORTANT **
Any change to a property that does not support update will force the destruction and recreation of the resource with the new property values</p>

<h2>Attributes Reference</h2>

<p>The following attributes are exported:</p>

<ul>
<li><code>collection_method</code> - Collection Method  Metric Extension applies</li>
<li><code>collection_recurrences</code> - Schedule of metric extension should use RFC 5545 format -&gt; recur-rule-part = &ldquo;FREQ&rdquo;;&ldquo;INTERVAL&rdquo; where FREQ rule part identifies the type of recurrence rule. Valid values are &ldquo;MINUTELY&rdquo;,&ldquo;HOURLY&rdquo;,&ldquo;DAILY&rdquo; to specify repeating events based on an interval of a minute, an hour and a day or more. Example- FREQ=DAILY;INTERVAL=1</li>
<li><code>compartment_id</code> - Compartment Identifier <a href="https://docs.cloud.oracle.com/iaas/Content/General/Concepts/identifiers.htm">OCID</a></li>
<li><code>created_by</code> - Created by user</li>
<li><code>description</code> - Description of the metric extension.</li>
<li><code>display_name</code> - Metric Extension resource display name</li>
<li><code>enabled_on_resources</code> - List of resource details objects having resourceIds on which this metric extension is enabled.

<ul>
<li><code>resource_id</code> - The OCID of the resource on which Metric Extension is enabled</li>
</ul></li>
<li><code>enabled_on_resources_count</code> - Count of resources on which this metric extension is enabled.</li>
<li><code>id</code> - The <a href="https://docs.cloud.oracle.com/iaas/Content/General/Concepts/identifiers.htm">OCID</a> of Metric Extension resource</li>
<li><code>last_updated_by</code> - Last updated by user</li>
<li><code>metric_list</code> - List of metrics which are part of this metric extension

<ul>
<li><code>compute_expression</code> - Compute Expression to calculate the value of this metric</li>
<li><code>data_type</code> - Data type of value of this metric</li>
<li><code>display_name</code> - Display name of the metric.</li>
<li><code>is_dimension</code> - Current metric need to be included as dimension or not</li>
<li><code>is_hidden</code> - Flag to marks whether a metric has to be uploaded or not. When isHidden = false -&gt; Metric is uploaded, isHidden = true -&gt; Metric is NOT uploaded</li>
<li><code>metric_category</code> - Metric category</li>
<li><code>name</code> - Name of the metric.</li>
<li><code>unit</code> - Unit of metric value</li>
</ul></li>
<li><code>name</code> - Metric Extension resource name</li>
<li><code>query_properties</code> - Collection method and query properties details of metric extension

<ul>
<li><code>arguments</code> - Arguments required by either command or script</li>
<li><code>auto_row_prefix</code> - Prefix for an auto generated metric, in case multiple rows with non unique key values are returned</li>
<li><code>collection_method</code> - Type of possible collection methods.</li>
<li><code>command</code> - OS command to execute without arguments</li>
<li><code>delimiter</code> - Character used to delimit multiple metric values in single line of output</li>
<li><code>identity_metric</code> - Semi-colon separated list of key properties from Managed Bean ObjectName to be used as key metrics</li>
<li><code>in_param_details</code> - List of values and position of PL/SQL procedure IN parameters

<ul>
<li><code>in_param_position</code> - Position of IN parameter</li>
<li><code>in_param_value</code> - Value of IN parameter</li>
</ul></li>
<li><code>is_metric_service_enabled</code> - Indicates if Metric Service is enabled on server domain</li>
<li><code>jmx_attributes</code> - List of JMX attributes or Metric Service Table columns separated by semi-colon</li>
<li><code>managed_bean_query</code> - JMX Managed Bean Query or Metric Service Table name</li>
<li><code>out_param_details</code> - Position and SQL Type of PL/SQL OUT parameter

<ul>
<li><code>out_param_name</code> - Name of the Out Parameter</li>
<li><code>out_param_position</code> - Position of PL/SQL procedure OUT parameter. The value of this property is ignored during update, if &ldquo;outParamType&rdquo; is set to NO_OUT_PARAM value.</li>
<li><code>out_param_type</code> - SQL Type of PL/SQL procedure OUT parameter. During the update, to completely remove the out parameter, use the value NO_OUT_PARAM. In that case, the value of &ldquo;outParamPosition&rdquo; will be ignored.</li>
</ul></li>
<li><code>protocol_type</code> - Supported protocol of resources to be associated with this metric extension. This is optional and defaults to HTTPS, which uses secure connection to the URL</li>
<li><code>response_content_type</code> - Type of content response given by the http(s) URL</li>
<li><code>script_details</code> - Script details applicable to any OS Command/HTTP based Metric Extension which needs to run a script to collect data. For removing it during OS Command based Metric Extension update, set its &ldquo;content&rdquo; property to an empty string. In that case, &ldquo;name&rdquo; property value is ignored.

<ul>
<li><code>content</code> - Content of the script/JavaScript file as base64 encoded string</li>
<li><code>name</code> - Name of the script file</li>
</ul></li>
<li><code>sql_details</code> - Details of Sql content which needs to execute to collect Metric Extension data

<ul>
<li><code>content</code> - Sql statement or script file content as base64 encoded string</li>
<li><code>script_file_name</code> - If a script needs to be executed, then provide file name of the script</li>
</ul></li>
<li><code>sql_type</code> - Type of SQL data collection method i.e. either a Statement or SQL Script File</li>
<li><code>starts_with</code> - String prefix used to identify metric output of the OS Command</li>
<li><code>url</code> - Http(s) end point URL</li>
</ul></li>
<li><code>resource_type</code> - Resource type to which Metric Extension applies</li>
<li><code>resource_uri</code> - The URI path that the user can do a GET on to access the metric extension metadata</li>
<li><code>state</code> - The current lifecycle state of the metric extension</li>
<li><code>status</code> - The current status of the metric extension i.e. whether it is Draft or Published</li>
<li><code>tenant_id</code> - Tenant Identifier <a href="https://docs.cloud.oracle.com/iaas/Content/General/Concepts/identifiers.htm">OCID</a></li>
<li><code>time_created</code> - Metric Extension creation time. An RFC3339 formatted datetime string.</li>
<li><code>time_updated</code> - Metric Extension update time. An RFC3339 formatted datetime string.</li>
</ul>

<h2>Timeouts</h2>

<p>The <code>timeouts</code> block allows you to specify <a href="https://registry.terraform.io/providers/oracle/oci/latest/docs/guides/changing_timeouts">timeouts</a> for certain operations:
	* <code>create</code> - (Defaults to 20 minutes), when creating the Metric Extension
	* <code>update</code> - (Defaults to 20 minutes), when updating the Metric Extension
	* <code>delete</code> - (Defaults to 20 minutes), when destroying the Metric Extension</p>

<h2>Import</h2>

<p>MetricExtensions can be imported using the <code>id</code>, e.g.</p>

<pre><code>$ terraform import oci_stack_monitoring_metric_extension.test_metric_extension &quot;id&quot;
</code></pre>

	</div>

</body>
</html>
